<!DOCTYPE html>
<html>
<!--
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
# 
# http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#  KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
-->
  <head>
  <title></title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <style>

        /*********************************************
        * GLOBAL STYLES
        *********************************************/

        * { -webkit-touch-callout: none; -webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-text-size-adjust: none; -webkit-user-drag: none; }

        html, body {
            margin: 0;
            min-height: 100%;
        }

        body {
            background: #393939;
            color: #000;
            font-family: Arial, sans-serif;
            font-size: medium;
            line-height: 22px;
        }

        .spacer {
            margin-top: 20px;
        }

        .floatRight {
            float: right;
        }

        #container {
            width: 320px;
            margin: 0 auto;
        }

        /*********************************************
        * HEADERS
        *********************************************/

        h1 {
            color: #42679C;
            font-size: xx-large;
            margin: 24px 0;
        }

        h2 {
            color: #42679C;
            font-size: x-large;
            margin: 32px 0 18px;
        }

        h3 {
            color: #42679C;
            font-size: large;
            margin: 30px 0 16px;
        }

        h4, h5, h6 {
            color: #000;
            font-size: 16px;
            margin: 20px 0 14px;
        }

        /*********************************************
        * LINKS
        *********************************************/

        a {
            color: #42679C;
        }

        /*********************************************
        * BUTTONS
        *********************************************/

        .controls {
            display: block;
            padding: 15px 0;
        }

        button {
            border: 1px solid #cfcfcf;
            background: #eee;
            display: inline-block;
            line-height: 22px;
            padding: 5px 20px;
            color: #333;
            font-size: large;
        }

        button:disabled {
            opacity: 0.5;
        }

        button:not(:disabled):hover {
            background: #fff;
            color: #ef4327;
        }

        button.small {
            color: #43679B;
            font-weight: bold;
            background: none;
            line-height: inherit;
            padding: 2px 5px;
        }

        /*********************************************
        * RADIO BUTTON, INPUT BOXES, CHECK BOXES
        *********************************************/

        input[type="checkbox"],
        input[type="radio"] {
            display: none;
        }

        label + br + input[type="text"]  {
            display: inline-block;
            margin: 0 2px 2px 0;
            padding: 2px 4px;
            border: 1px solid #cfcfcf;
            color: #000;
            background: #eee;
            font-size: larger;  
            border-radius: 0;
        }

        label + br + input[type="password"]  {
            display: inline-block;
            margin: 0 2px 2px 0;
            padding: 2px 4px;
            border: 1px solid #cfcfcf;
            color: #000;
            background: #eee;
            font-size: larger; 
            border-radius: 0; 
        }

        input[type="checkbox"] + label,
        input[type="radio"] + label {
            display: inline-block;
            margin: 0 2px 2px 0;
            padding: 2px 4px;
            border: 1px solid #cfcfcf;
            color: #000;
            background: #eee;
            font-size: larger;
        }

        input[type="checkbox"] + label:hover,
        input[type="radio"] + label:hover,
        input[type="text"] + label:hover {
            background: #fff;
            border-color: #ef4327;
            color: #ef4327;
        }

        input[type="checkbox"]:checked + label,
        input[type="radio"]:checked + label,
        input[type="text"]:checked + label {
            background: #ef4327;
            color: #fff;
            border-color: #ef4327;
        }

        input[type="radio"] + label:before {
            content: '○';
            font-size: 16px;
            margin-right: 3px;
        }

        input[type="radio"]:checked + label:before {
            content: '●';
        }

        input[type="checkbox"] + label:before {
            content: '□';
            font-size: 15px;
            margin-right: 4px;
        }

        input[type="checkbox"]:checked + label:before {
            content: '■';
        }

        /*********************************************
        * CODE & SYNTAX
        *********************************************/

        code, samp {
            display: block;
            background: #393939;
            color: #fff;
            padding: 12px;
            border: 1px solid #000;
            font-family: 'Lucida Console', Monaco, monospace;
            font-size: larger;
            white-space: pre-wrap;
            position: relative;
        }

        code:hover:before, samp:hover:before {
            display: inline-block;
            white-space: nowrap;
            position: absolute;
            top: -20px;
            right: -10px;
            background: #FFD;
            color: #330;
            content: 'Click to copy';
            padding: 2px 4px;
            font-family: sans-serif;
            font-size: larger;
            opacity: 0.9;
            font-weight: bold;
        }

        /*********************************************
        * SECTION DIVIDERS
        *********************************************/

        section {
            margin-bottom: 20px;
        }

        /*********************************************
        * DIALOGS
        *********************************************/

        section.dialog {
            border: 1px solid #999;
            background: #fff;
            padding: 12px;
            margin: 0;
            position: relative;
        }

        section.dialog h1 {
            display: block;
            margin: -12px -12px 12px -12px;
            padding: 10px 4px;
            background: #eee;
            text-align: center;
            font-size: 13px;
            font-weight: normal;
            color: #000;
        }

        section.dialog section {
            padding: 20px;
            margin: 20px -12px;
            border-top: 1px solid #999;
            border-bottom: 1px solid #999;
            border-left: 10px solid #999;
            border-right: 10px solid #999;
        }

        section.dialog section h1 {
            text-align: center;
            padding: 0;
            background: none;
            color: #42679C;
            font-size: 13px;
            margin: 0 0 10px 0;
        }
    </style>

    <!-- iPad/iPhone specific css below, add after your main css >
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />        
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />       
    -->
    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript">
        // If you want to prevent dragging, uncomment this section
        /*
        function preventBehavior(e) 
        { 
          e.preventDefault(); 
        };
        document.addEventListener("touchmove", preventBehavior, false);
        */

        /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
        see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
        for more details -jm */
        /*
        function handleOpenURL(url)
        {
            // TODO: do something with the url passed in.
        }
        */

        function onBodyLoad() {       
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        /* When this function is called, Cordova has been initialized and is ready to roll */
        /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
        see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
        for more details -jm */
        function onDeviceReady() {
            if (!window.wizAssets) {
                alert("Could not find wizAssets");
            }
        }

        function showImage(img, src, width, height, alt) {
            var image = document.createElement("img");
            image.src = src;
            image.width = width;
            image.height = height;
            image.alt = alt;
            image.id = img;

            // This next line will just add it to the <body> tag
            document.getElementById("img_container").appendChild(image);
        }

        function hideImage(img) {
            var image = document.getElementById(img);
            if ( image ) {
                // This next line will just remove
                document.getElementById("img_container").removeChild(image);
                image = null;
            }
        }

        function downloadFile(download_button, delete_button, url, filepath, img) {
            // Disable the download button and start download
            document.getElementById(download_button).disabled = true;
            window.wizAssets.downloadFile(url,
                filepath,
                function (fileUri) {
                  // Show the image and enable delete button
                  alert("Download Success:\n" + fileUri);
                  showImage(img, fileUri , 276,110, fileUri);
                  document.getElementById(delete_button).disabled = false;
                },
                function (error) {
                  // Enable the download button
                  alert("Download Fail:\n" + error);
                  document.getElementById(download_button).disabled = false;
                }
            );
        }
        
        function deleteFile(uri, download_button, delete_button, img) {
            
            // Define success callback for deleting the URI.
            function deleteFileSuccessCallback() {
                // Hide the image, enable download button, and disable delete button
                hideImage(img);
                document.getElementById(download_button).disabled = false;
                document.getElementById(delete_button).disabled = true;
                alert("Delete Success:\n" + uri);
            }

            // Define error callback for deleting the URI.
            function deleteFileErrorCallback(error) {
                alert("Delete Fail:\n" + error + "\nFile was probably already deleted.");
            }
            
            // Delete the URI (and invoke appropriate callback).
            window.wizAssets.deleteFile(uri, deleteFileSuccessCallback, deleteFileErrorCallback);
        }

        function getFileURI(path) {
            window.wizAssets.getFileURI(path,
                function (fileUri) {
                    alert("Success:\n" + path + "\nURI is:\n" + fileUri);
                },
                function (error) {
                    alert("Failed to get file URI error: " + error);
                }
            );
        }

        function getFileURIs() {
            window.wizAssets.getFileURIs(
                function (fileUriMap) {
                    alert( "Found " + Object.keys(fileUriMap).length + " URIs" );
                    for (var i = 0; i < Object.keys(fileUriMap).length; i += 1) {
                        var key = Object.keys(fileUriMap)[i];
                        alert( key + "\nmaps to:\n" + fileUriMap[key] );
                    }
                 },
                 function( error ) {
                    alert("Failed to get file URIs");
                 }
             );
        }

        function deleteFiles(download_buttons, delete_buttons, images) {
            // We will retrieve the file URIs and then delete the URIs.

            // Define success callback for getting the URIs.
            function getFileURIsSuccessCallback(fileUriMap) {

                // Define success callback for deleting the URIs.
                function deleteFilesSuccessCallback() {
                    alert( "Delete Files Success" );
                    // Hide all images
                    for ( var i = 0; i < images.length; i++ ) {
                        hideImage( images[i] );
                    }
                    // Enable all download buttons
                    for ( var i = 0; i < download_buttons.length; i++ ) {
                        document.getElementById( download_buttons[i] ).disabled = false;
                    }
                    // Disable all delete buttons
                    for ( var i = 0; i < delete_buttons.length; i++ ) {
                        document.getElementById( delete_buttons[i] ).disabled = true;
                    }
                }

                // Define error callback for deleting the URIs.
                function deleteFilesErrorCallback(error) {
                    alert("Delete Files Fail:\n" + error);
                }

                // Delete the URIs (and invoke appropriate callback).
                var files = Object.keys(fileUriMap);
                alert("Deleting " + files.length + " files");
                window.wizAssets.deleteFiles(files, deleteFilesSuccessCallback, deleteFilesErrorCallback);
            }

            // Define error callback for getting the URIs.
            function getFileURIsErrorCallback(error) {
                alert("Failed to get file URIs");
            }

            // Get the URIs (and invoke appropriate callback).
            window.wizAssets.getFileURIs(getFileURIsSuccessCallback, getFileURIsErrorCallback);
        }
    </script>
  </head>
    <body onload="onBodyLoad()">
        <div id="container">
            <h1>wizAssets plugin</h1>
            <section class="dialog">
                <div id="img_container"></div>
                <p>Download an image...</p>
                <button id="download_button_1" onclick="downloadFile('download_button_1', 'delete_button_1', 'http://www.wizcorp.jp/images/logo.png' , 'img/ui/wizcorp-logo.png', 'img1')">Download File 1</button>
                <p>Delete first image...</p>
                <button id="delete_button_1" onclick="deleteFile('img/ui/wizcorp-logo.png', 'download_button_1', 'delete_button_1', 'img1')" disabled="true">Delete File 1</button>
                <p>Delete all images...</p>
                <button  onclick="deleteFiles( ['download_button_1', 'download_button_2'], ['delete_button_1', 'delete_button_2'], ['img1', 'img2'] )">Delete All Files</button>
                <p>Download a second image...</p>
                <button id="download_button_2" onclick="downloadFile('download_button_2', 'delete_button_2', 'https://www.google.com/images/srpr/logo3w.png' , 'img/ui/logo3w.png', 'img2')">Download File 2</button>
                <p>Delete second image...</p>
                <button id="delete_button_2" onclick="deleteFile('img/ui/logo3w.png', 'download_button_2', 'delete_button_2', 'img2')" disabled="true">Delete File 2</button>
                </br>
                <p>Return file paths...</p>
                <button onclick="getFileURI('img/ui/wizcorp-logo.png')">Get File URI 1</button>
                <button onclick="getFileURI('img/ui/logo3w.png')">Get File URI 2</button>
                <button onclick="getFileURIs()">Get File URIs</button>
                <p>Experiment by pressing the buttons to manage assets.</p>
            </section>
        </div>
    </body>
</html>
